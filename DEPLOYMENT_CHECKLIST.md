# Чек-лист развертывания VELES AUTO

## ✅ Подготовка

### Системные требования
- [ ] Ubuntu 20.04+ или CentOS 8+
- [ ] Docker 20.10+ установлен
- [ ] Docker Compose 2.0+ установлен
- [ ] Минимум 4GB RAM доступно
- [ ] Минимум 50GB свободного места
- [ ] Домен настроен и указывает на сервер

### Домены и DNS
- [ ] veles-drive.ru → A запись на сервер
- [ ] api.veles-drive.ru → A запись на сервер
- [ ] tg.veles-drive.ru → A запись на сервер
- [ ] admin.veles-drive.ru → A запись на сервер
- [ ] www.veles-drive.ru → CNAME на veles-drive.ru

### Переменные окружения
- [ ] .env файл создан и настроен
- [ ] SECRET_KEY сгенерирован и установлен
- [ ] DATABASE_URL настроен
- [ ] REDIS_URL настроен
- [ ] TELEGRAM_BOT_TOKEN получен и настроен
- [ ] MINIO_ACCESS_KEY и MINIO_SECRET_KEY настроены
- [ ] EMAIL настройки конфигурированы

## ✅ Развертывание

### Docker контейнеры
- [ ] docker-compose build выполнен успешно
- [ ] docker-compose up -d выполнен успешно
- [ ] Все контейнеры запущены (docker-compose ps)
- [ ] Логи не содержат критических ошибок

### База данных
- [ ] Миграции созданы (makemigrations)
- [ ] Миграции применены (migrate)
- [ ] Суперпользователь создан
- [ ] Демо данные загружены (опционально)

### Статические файлы
- [ ] collectstatic выполнен успешно
- [ ] Статические файлы доступны через nginx

## ✅ SSL сертификаты

### Let's Encrypt
- [ ] Сертификаты получены для всех доменов
- [ ] Автоматическое обновление настроено
- [ ] Тест обновления прошел успешно

### Проверка SSL
- [ ] https://veles-drive.ru работает
- [ ] https://api.veles-drive.ru работает
- [ ] https://tg.veles-drive.ru работает
- [ ] https://admin.veles-drive.ru работает
- [ ] Редирект с HTTP на HTTPS работает

## ✅ Функциональность

### Основной сайт (veles-drive.ru)
- [ ] Главная страница загружается
- [ ] Поиск автомобилей работает
- [ ] Фильтры работают
- [ ] Карточки автомобилей отображаются
- [ ] Schema.org микроразметка присутствует
- [ ] Адаптивный дизайн работает

### API (api.veles-drive.ru)
- [ ] /api/health/ возвращает 200
- [ ] /api/vehicles/ возвращает список
- [ ] /api/companies/ возвращает список
- [ ] Аутентификация работает
- [ ] CORS настроен правильно
- [ ] Rate limiting работает

### Telegram Mini App (tg.veles-drive.ru)
- [ ] Страница загружается в Telegram
- [ ] Поиск работает
- [ ] Карточки отображаются
- [ ] Интеграция с Telegram API работает

### Админка (admin.veles-drive.ru)
- [ ] Django Admin доступен
- [ ] Все модели зарегистрированы
- [ ] Фильтры и поиск работают
- [ ] Загрузка файлов работает

## ✅ Новые функции

### Универсальные модели транспорта
- [ ] Vehicle модель работает
- [ ] Car модель работает
- [ ] Motorcycle модель работает
- [ ] Boat модель работает
- [ ] Aircraft модель работает
- [ ] API endpoints работают

### Аукционы
- [ ] Auction модель работает
- [ ] Создание аукционов работает
- [ ] Размещение ставок работает
- [ ] Уведомления работают

### Лизинг
- [ ] LeasingApplication модель работает
- [ ] Создание заявок работает
- [ ] Расчет платежей работает

### Страхование
- [ ] InsurancePolicy модель работает
- [ ] Создание полисов работает
- [ ] Расчет премий работает

### ERP система
- [ ] ProjectBoard работает
- [ ] ProjectTask работает
- [ ] Trello-like интерфейс работает
- [ ] Drag & drop работает

## ✅ Производительность

### Кэширование
- [ ] Redis подключен и работает
- [ ] Кэширование API работает
- [ ] Кэширование статических файлов работает

### База данных
- [ ] Индексы созданы
- [ ] Запросы оптимизированы
- [ ] Пагинация работает

### Статические файлы
- [ ] Gzip сжатие работает
- [ ] Кэширование браузера работает
- [ ] CDN настроен (если используется)

## ✅ Мониторинг

### Prometheus
- [ ] Метрики собираются
- [ ] http://localhost:9090 доступен
- [ ] Targets в состоянии UP

### Grafana
- [ ] http://localhost:3003 доступен
- [ ] Дашборды настроены
- [ ] Источники данных подключены

### AlertManager
- [ ] Уведомления настроены
- [ ] Тестовое уведомление отправлено
- [ ] Интеграция с Telegram работает

### Логирование
- [ ] Логи собираются
- [ ] Ротация логов настроена
- [ ] Централизованный сбор логов работает

## ✅ Безопасность

### Аутентификация
- [ ] JWT токены работают
- [ ] Session-based аутентификация работает
- [ ] Telegram OAuth работает

### Защита API
- [ ] Rate limiting работает
- [ ] CORS настроен правильно
- [ ] Валидация входных данных работает

### Файловая безопасность
- [ ] Валидация загружаемых файлов работает
- [ ] Ограничение размеров работает
- [ ] Проверка MIME типов работает

### SSL/TLS
- [ ] Все соединения используют HTTPS
- [ ] HSTS заголовки настроены
- [ ] Современные шифры используются

## ✅ Telegram Bot

### Основная функциональность
- [ ] Бот отвечает на команды
- [ ] Поиск автомобилей работает
- [ ] Уведомления отправляются
- [ ] Интеграция с Mini App работает

### Mini App
- [ ] Открывается в Telegram
- [ ] Поиск работает
- [ ] Карточки отображаются
- [ ] Навигация работает

### Webhook
- [ ] Webhook настроен
- [ ] Обработка событий работает
- [ ] Ошибки логируются

## ✅ Резервное копирование

### Автоматические бэкапы
- [ ] Скрипт бэкапа создан
- [ ] Cron задача настроена
- [ ] Тестовый бэкап создан
- [ ] Восстановление протестировано

### Мониторинг бэкапов
- [ ] Уведомления о бэкапах настроены
- [ ] Проверка целостности работает
- [ ] Очистка старых бэкапов работает

## ✅ Тестирование

### Функциональные тесты
- [ ] Тесты API проходят
- [ ] Тесты моделей проходят
- [ ] Тесты интеграции проходят

### Нагрузочные тесты
- [ ] API выдерживает нагрузку
- [ ] База данных справляется с запросами
- [ ] Статические файлы отдаются быстро

### Тесты безопасности
- [ ] SQL инъекции заблокированы
- [ ] XSS атаки заблокированы
- [ ] CSRF защита работает

## ✅ Документация

### Техническая документация
- [ ] ARCHITECTURE.md создан
- [ ] API_DOCUMENTATION.md создан
- [ ] DEPLOYMENT_GUIDE.md создан
- [ ] README.md обновлен

### Пользовательская документация
- [ ] Инструкции для пользователей созданы
- [ ] FAQ создан
- [ ] Видео-инструкции записаны

## ✅ Финальная проверка

### Все домены
- [ ] veles-drive.ru работает
- [ ] api.veles-drive.ru работает
- [ ] tg.veles-drive.ru работает
- [ ] admin.veles-drive.ru работает

### Все функции
- [ ] Поиск и фильтрация работают
- [ ] Регистрация и авторизация работают
- [ ] Загрузка файлов работает
- [ ] Уведомления работают

### Производительность
- [ ] Время загрузки страниц < 3 секунд
- [ ] API отвечает < 500ms
- [ ] Статические файлы загружаются быстро

### Безопасность
- [ ] Все уязвимости исправлены
- [ ] SSL сертификаты действительны
- [ ] Брандмауэр настроен

## 🚀 Готово к продакшену!

Если все пункты отмечены, система готова к использованию в продакшене.

### Контакты для поддержки
- Email: support@veles-drive.ru
- Telegram: @veles_auto_support
- Документация: https://docs.veles-drive.ru

### Мониторинг после запуска
- Регулярно проверяйте логи
- Следите за метриками в Grafana
- Отслеживайте уведомления от AlertManager
- Проверяйте бэкапы
- Обновляйте систему безопасности 